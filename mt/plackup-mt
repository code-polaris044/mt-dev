#!/usr/bin/perl

use strict;
use warnings;

use FindBin;

my $server = 'starman';
my @opts   = ();

# Preload
push @opts, map {"-M$_"} qw(
    CGI
    File::Spec
    CGI::Cookie
    LWP::UserAgent
    HTML::Entities
    Scalar::Util
    DBI
    DBD::mysql
    Image::Magick
);

if ( $FindBin::Script eq 'plackup-mt-R' ) {

    # -R options
    push @opts, map { ( '-R' => $_ ) }
        ( glob('*.cgi'), grep { $_ ne 'support' } glob('mt-static/*') );
}

exec $server, @opts, @ARGV;
